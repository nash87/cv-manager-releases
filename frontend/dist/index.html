<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV Manager - Verschlüsselt & DSGVO-Konform</title>
    <link rel="stylesheet" href="style.css">
    <script src="i18n/i18n.js"></script>
</head>
<body>
    <!-- Custom Titlebar with Window Controls -->
    <div class="titlebar" data-wails-drag>
        <div class="titlebar-title">CV Manager</div>
        <div class="titlebar-controls">
            <button class="titlebar-btn" id="minimizeBtn" title="Minimieren">
                <svg width="12" height="12" viewBox="0 0 12 12"><line x1="0" y1="6" x2="12" y2="6" stroke="currentColor" stroke-width="1.5"/></svg>
            </button>
            <button class="titlebar-btn" id="maximizeBtn" title="Maximieren">
                <svg width="12" height="12" viewBox="0 0 12 12"><rect x="1" y="1" width="10" height="10" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
            </button>
            <button class="titlebar-btn titlebar-close" id="closeBtn" title="Schließen">
                <svg width="12" height="12" viewBox="0 0 12 12"><line x1="2" y1="2" x2="10" y2="10" stroke="currentColor" stroke-width="1.5"/><line x1="10" y1="2" x2="2" y2="10" stroke="currentColor" stroke-width="1.5"/></svg>
            </button>
        </div>
    </div>

    <!-- Splash Screen with Loading Animation -->
    <div id="splashScreen" class="splash-screen">
        <div class="splash-content">
            <div class="splash-logo">
                <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="url(#splashGradient)" stroke-width="2">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                    <path d="M9 12l2 2 4-4"></path>
                </svg>
                <defs>
                    <linearGradient id="splashGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                    </linearGradient>
                </defs>
            </div>

            <h1 class="splash-title">CV Manager</h1>
            <p class="splash-subtitle">Verschlüsselt & DSGVO-Konform</p>

            <!-- Loading Spinner -->
            <div class="loading-spinner">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
            </div>

            <!-- Loading Status -->
            <div class="loading-status">
                <p id="loadingStatusText">Initialisierung...</p>
            </div>

            <!-- Progress Bar -->
            <div class="progress-bar-container">
                <div class="progress-bar" id="splashProgress"></div>
            </div>

            <!-- Version Information -->
            <div class="version-info">
                <p class="splash-version" id="splashVersion">Version wird geladen...</p>
                <p class="splash-build" id="splashBuild" style="font-size: 11px; color: rgba(255,255,255,0.6); margin-top: 4px;"></p>
            </div>

            <!-- Migration Status -->
            <div id="migrationStatus" class="migration-status" style="display: none;">
                <div class="migration-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="17 8 12 3 7 8"></polyline>
                        <line x1="12" y1="3" x2="12" y2="15"></line>
                    </svg>
                </div>
                <div class="migration-text">
                    <p class="migration-title">Update erkannt</p>
                    <p class="migration-message" id="migrationMessage">Migriere von v<span id="oldVersion">1.0.0</span> auf v<span id="newVersion">1.1.0</span>...</p>
                </div>
            </div>

            <!-- Update Notification (Discord-style) -->
            <div id="updateNotification" class="update-notification" style="display: none;">
                <div class="update-notification-content">
                    <div class="update-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                    </div>
                    <div class="update-text">
                        <h3 class="update-title">Update verfügbar!</h3>
                        <p class="update-message">
                            <span id="updateVersionInfo">v1.1.3 ist verfügbar</span>
                            <span id="updateSize" style="opacity: 0.7; margin-left: 8px;">(16 MB)</span>
                        </p>
                        <p class="update-notes" id="updateReleaseNotes">Neue Features und Bugfixes</p>
                    </div>
                    <div class="update-actions">
                        <button id="updateNowBtn" class="update-btn update-btn-primary">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            Jetzt updaten
                        </button>
                        <button id="updateLaterBtn" class="update-btn update-btn-secondary">Später</button>
                    </div>
                </div>
                <!-- Download Progress -->
                <div id="updateProgress" class="update-progress" style="display: none;">
                    <div class="update-progress-bar">
                        <div class="update-progress-fill" id="updateProgressFill"></div>
                    </div>
                    <p class="update-progress-text" id="updateProgressText">Download läuft...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Consent Screen (First Launch) -->
    <div id="consentScreen" class="consent-screen" style="display: none;">
        <div class="consent-content-new">
            <!-- Header with shield icon -->
            <div class="consent-header">
                <div class="consent-shield">
                    <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" fill="var(--accent-primary)" opacity="0.1"></path>
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" stroke="var(--accent-primary)"></path>
                    </svg>
                </div>
                <h1>Willkommen bei <span style="color: var(--accent-primary);">CV Manager</span></h1>
                <p class="consent-tagline">Professionelle Lebenslauf-Verwaltung mit militärischer Verschlüsselung</p>
            </div>

            <!-- Tech Stack Information -->
            <div class="tech-info-box">
                <h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 8px;">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="16" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                </svg>Technische Details</h3>
                <div class="tech-grid">
                    <div class="tech-item">
                        <span class="tech-label">Framework:</span>
                        <span class="tech-value">Wails v2.11.0 (Go + WebView2)</span>
                    </div>
                    <div class="tech-item">
                        <span class="tech-label">Datenbank:</span>
                        <span class="tech-value">BadgerDB v4.2.0 (LSM-Tree)</span>
                    </div>
                    <div class="tech-item">
                        <span class="tech-label">Verschlüsselung:</span>
                        <span class="tech-value">AES-256-GCM + PBKDF2 (100k Iterations)</span>
                    </div>
                    <div class="tech-item">
                        <span class="tech-label">Datenspeicherort:</span>
                        <span class="tech-value" id="dataLocation">Wird geladen...</span>
                    </div>
                    <div class="tech-item">
                        <span class="tech-label">Backend:</span>
                        <span class="tech-value">Go 1.21+ (Compiled Binary)</span>
                    </div>
                    <div class="tech-item">
                        <span class="tech-label">Frontend:</span>
                        <span class="tech-value">Vanilla JS + CSS3 (No external CDN)</span>
                    </div>
                </div>
            </div>

            <!-- Security Features with GREEN checkmarks -->
            <div class="security-features">
                <h3>Deine Daten sind sicher</h3>
                <div class="feature-grid">
                    <div class="security-feature">
                        <svg class="check-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="10" fill="#10b981" opacity="0.15"></circle>
                            <path d="M9 12l2 2 4-4" stroke="#10b981" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                        <div>
                            <h4>100% Offline & Lokal</h4>
                            <p>Keine Internetverbindung erforderlich. Alle Daten bleiben auf deinem Gerät.</p>
                        </div>
                    </div>
                    <div class="security-feature">
                        <svg class="check-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="10" fill="#10b981" opacity="0.15"></circle>
                            <path d="M9 12l2 2 4-4" stroke="#10b981" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                        <div>
                            <h4>End-to-End Verschlüsselung</h4>
                            <p>AES-256-GCM Verschlüsselung mit PBKDF2 Key-Derivation (100.000 Iterations)</p>
                        </div>
                    </div>
                    <div class="security-feature">
                        <svg class="check-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="10" fill="#10b981" opacity="0.15"></circle>
                            <path d="M9 12l2 2 4-4" stroke="#10b981" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                        <div>
                            <h4>DSGVO-Konform</h4>
                            <p>Volle Einhaltung der EU-Datenschutzbestimmungen (Art. 6, 7, 13, 15, 17, 20, 32)</p>
                        </div>
                    </div>
                    <div class="security-feature">
                        <svg class="check-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="10" fill="#10b981" opacity="0.15"></circle>
                            <path d="M9 12l2 2 4-4" stroke="#10b981" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                        <div>
                            <h4>Open Source Ready</h4>
                            <p>Transparente Datenverarbeitung mit vollständigem Compliance-Log</p>
                        </div>
                    </div>
                    <div class="security-feature">
                        <svg class="check-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="10" fill="#10b981" opacity="0.15"></circle>
                            <path d="M9 12l2 2 4-4" stroke="#10b981" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                        <div>
                            <h4>Volle Datenkontrolle</h4>
                            <p>Export & Löschung aller Daten jederzeit möglich (Art. 15, 17, 20 DSGVO)</p>
                        </div>
                    </div>
                    <div class="security-feature">
                        <svg class="check-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="10" fill="#10b981" opacity="0.15"></circle>
                            <path d="M9 12l2 2 4-4" stroke="#10b981" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                        <div>
                            <h4>Keine Telemetrie</h4>
                            <p>Zero Tracking, keine Analytics, keine Cloud-Sync. Deine Daten gehören nur dir.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Consent Agreement -->
            <div class="consent-agreement-new">
                <div class="agreement-header">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                    </svg>
                    <strong>Einwilligung zur Datenverarbeitung (Art. 6 Abs. 1 lit. a DSGVO)</strong>
                </div>
                <p>Mit Klick auf "Ich stimme zu" willigst du ein in:</p>
                <ul class="consent-list">
                    <li>Lokale Speicherung deiner CV-Daten im verschlüsselten BadgerDB-Format</li>
                    <li>Verarbeitung deiner persönlichen Daten ausschließlich für CV-Verwaltungszwecke</li>
                    <li>Protokollierung von Datenoperationen für Compliance-Transparenz (DSGVO Art. 30)</li>
                </ul>
                <div class="consent-note">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="16" x2="12" y2="12"></line>
                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                    </svg>
                    <p>Du kannst deine Einwilligung jederzeit in den Einstellungen widerrufen (Art. 7 Abs. 3 DSGVO). Alle Daten werden ausschließlich lokal gespeichert und niemals an externe Server übertragen.</p>
                </div>
            </div>

            <!-- Action Button -->
            <button class="btn-consent" id="grantConsentBtn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
                Ich stimme zu - CV Manager starten
            </button>

            <p class="consent-version">CV Manager v1.0.0 - Made with Go & Wails</p>
        </div>
    </div>

    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <rect width="32" height="32" rx="8" fill="url(#gradient)"/>
                    <path d="M8 12H24M8 16H24M8 20H18" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    <defs>
                        <linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32">
                            <stop offset="0%" stop-color="#667eea"/>
                            <stop offset="100%" stop-color="#764ba2"/>
                        </linearGradient>
                    </defs>
                </svg>
                <h1>CV Manager</h1>
            </div>

            <!-- Security Status Indicator -->
            <div class="security-indicator">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                    <path d="M9 12l2 2 4-4"></path>
                </svg>
                <span>Encrypted & Secure</span>
            </div>
        </div>

        <nav class="sidebar-nav">
            <button class="nav-item active" data-view="dashboard">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                </svg>
                <span>Dashboard</span>
            </button>

            <button class="nav-item" data-view="statistics">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
                </svg>
                <span data-i18n="nav.statistics">Statistics</span>
            </button>

            <button class="nav-item" data-view="applications">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                    <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                    <line x1="12" y1="22.08" x2="12" y2="12"></line>
                </svg>
                <span data-i18n="nav.applications">Bewerbungen</span>
            </button>

            <button class="nav-item" data-view="visualEditor">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/>
                </svg>
                <span>Visual Editor</span>
            </button>

            <button class="nav-item" data-view="privacy">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                </svg>
                <span>Privacy & Security</span>
            </button>

            <button class="nav-item" data-view="audit">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                    <path d="M9 12h6"></path>
                    <path d="M9 16h6"></path>
                </svg>
                <span data-i18n="nav.audit">Audit Log</span>
            </button>

            <button class="nav-item" data-view="settings">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
                </svg>
                <span>Settings</span>
            </button>

            <button class="nav-item" data-view="updates">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                <span>Updates</span>
            </button>

            <div style="margin-top: auto; padding-top: 16px; border-top: 1px solid var(--border-color);">
                <button class="nav-item" id="exitBtn" style="color: var(--text-error);">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd"/>
                    </svg>
                    <span data-i18n="nav.exit">Exit</span>
                </button>
            </div>
        </nav>

    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard View -->
        <div id="dashboardView" class="view active">
            <!-- Toolbar -->
            <div class="toolbar">
                <div class="search-bar">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"/>
                    </svg>
                    <input type="text" id="searchInput" placeholder="Search CVs...">
                </div>

                <div class="filters">
                    <select id="statusFilter" class="filter-select">
                        <option value="">All Status</option>
                        <option value="draft">Draft</option>
                        <option value="ready">Ready</option>
                        <option value="submitted">Submitted</option>
                        <option value="archived">Archived</option>
                    </select>

                    <select id="categoryFilter" class="filter-select">
                        <option value="">All Categories</option>
                    </select>
                </div>
            </div>

            <!-- New CV Action (Prominent) -->
            <div class="dashboard-action-center">
                <button class="btn-new-cv-large" id="newCvBtnDashboard">
                    <svg width="32" height="32" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/>
                    </svg>
                    <span>Neuen Lebenslauf erstellen</span>
                </button>
            </div>

            <!-- CV Grid -->
            <div class="cv-grid" id="cvGrid">
                <!-- CV cards will be inserted here -->
            </div>
        </div>

        <!-- Statistics View -->
        <div id="statisticsView" class="view">
            <div class="stats-view-header">
                <div>
                    <h1 data-i18n="statistics.title">Statistiken</h1>
                    <p data-i18n="statistics.subtitle">Übersicht über deine CVs und Bewerbungen</p>
                </div>
                <div class="stats-period-selector">
                    <button class="period-btn active" data-period="all">Gesamt</button>
                    <button class="period-btn" data-period="year">Dieses Jahr</button>
                    <button class="period-btn" data-period="month">Dieser Monat</button>
                </div>
            </div>

            <!-- Overview Stats Cards (Compact) -->
            <div class="stats-overview-grid">
                <div class="stat-card-compact">
                    <div class="stat-icon" style="background: rgba(127, 109, 242, 0.1);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7f6df2" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <span class="stat-label">Lebensläufe Gesamt</span>
                        <span class="stat-value" id="stat-total-cvs">0</span>
                    </div>
                </div>

                <div class="stat-card-compact">
                    <div class="stat-icon" style="background: rgba(16, 185, 129, 0.1);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2">
                            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <span class="stat-label">Bewerbungen</span>
                        <span class="stat-value" id="stat-total-apps">0</span>
                    </div>
                </div>

                <div class="stat-card-compact">
                    <div class="stat-icon" style="background: rgba(59, 130, 246, 0.1);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#3b82f6" stroke-width="2">
                            <path d="M20 7h-9"></path>
                            <path d="M14 17H5"></path>
                            <circle cx="17" cy="17" r="3"></circle>
                            <circle cx="7" cy="7" r="3"></circle>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <span class="stat-label">Berufserfahrung</span>
                        <span class="stat-value" id="stat-total-work">0</span>
                    </div>
                </div>

                <div class="stat-card-compact">
                    <div class="stat-icon" style="background: rgba(245, 158, 11, 0.1);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2">
                            <path d="M22 10v6M2 10l10-5 10 5-10 5z"></path>
                            <path d="M6 12v5c3 3 9 3 12 0v-5"></path>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <span class="stat-label">Bildungsabschlüsse</span>
                        <span class="stat-value" id="stat-total-edu">0</span>
                    </div>
                </div>

                <div class="stat-card-compact">
                    <div class="stat-icon" style="background: rgba(239, 68, 68, 0.1);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ef4444" stroke-width="2">
                            <path d="M12 20h9"></path>
                            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <span class="stat-label">Fähigkeiten</span>
                        <span class="stat-value" id="stat-total-skills">0</span>
                    </div>
                </div>

                <div class="stat-card-compact">
                    <div class="stat-icon" style="background: rgba(168, 85, 247, 0.1);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#a855f7" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <span class="stat-label">Ø Berufserfahrung pro CV</span>
                        <span class="stat-value" id="stat-avg-work">0.0</span>
                    </div>
                </div>
            </div>

            <!-- Charts Grid -->
            <div class="stats-charts-grid">
                <!-- CV Status Distribution (Donut Chart) -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M12 6v6l4 2"></path>
                            </svg>
                            CV Status-Verteilung
                        </h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="statusDonutChart"></canvas>
                    </div>
                    <div class="chart-legend" id="statusLegend"></div>
                </div>

                <!-- Category Distribution (Donut Chart) -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                <path d="M22 6l-10 7L2 6"></path>
                            </svg>
                            Kategorien
                        </h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="categoryDonutChart"></canvas>
                    </div>
                    <div class="chart-legend" id="categoryLegend"></div>
                </div>

                <!-- Template Usage (Bar Chart) -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="9" y1="3" x2="9" y2="21"></line>
                            </svg>
                            Template-Nutzung
                        </h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="templateBarChart"></canvas>
                    </div>
                </div>

                <!-- Skills Overview (Horizontal Bar) -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                            </svg>
                            Durchschnittliche Werte
                        </h3>
                    </div>
                    <div class="chart-container">
                        <div class="horizontal-bars" id="avgBars">
                            <!-- Bars will be generated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detailed Stats Table -->
            <div class="stats-table-card">
                <div class="stats-table-header">
                    <h3>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                        </svg>
                        Detaillierte Übersicht
                    </h3>
                </div>
                <div class="stats-table-container" id="statsTable">
                    <!-- Table will be generated here -->
                </div>
            </div>
        </div>

        <!-- Applications Management View -->
        <div id="applicationsView" class="view">
            <div class="applications-header">
                <div>
                    <h1 data-i18n="applications.title">Bewerbungsmanagement</h1>
                    <p data-i18n="applications.subtitle">Verfolge deine Bewerbungen und Rückmeldungen</p>
                </div>
                <button class="btn-primary" id="newApplicationBtn">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"/>
                    </svg>
                    <span data-i18n="applications.newApplication">Neue Bewerbung</span>
                </button>
            </div>

            <!-- Application Statistics -->
            <div class="application-stats-grid" id="applicationStatsGrid">
                <!-- Stats will be inserted here -->
            </div>

            <!-- Filter & Search -->
            <div class="applications-filter-bar">
                <input type="text" id="applicationSearch" placeholder="Bewerbungen durchsuchen..." class="search-input">
                <select id="applicationStatusFilter" class="filter-select">
                    <option value="">Alle Status</option>
                    <option value="draft">Entwurf</option>
                    <option value="applied">Beworben</option>
                    <option value="interview_scheduled">Vorstellungsgespräch geplant</option>
                    <option value="interviewed">Vorstellungsgespräch abgeschlossen</option>
                    <option value="offer">Angebot erhalten</option>
                    <option value="accepted">Angenommen</option>
                    <option value="rejected">Abgelehnt</option>
                </select>
                <select id="applicationPortalFilter" class="filter-select">
                    <option value="">Alle Portale</option>
                </select>
            </div>

            <!-- Applications Timeline (Red Thread) -->
            <div class="applications-timeline" id="applicationsTimeline">
                <!-- Timeline will be inserted here -->
            </div>
        </div>

        <!-- WYSIWYG CV Builder View - State of the Art -->
        <div id="visualEditorView" class="view">
            <div class="wysiwyg-builder-pro">
                <!-- Floating Format Toolbar (appears on text selection) -->
                <div class="floating-toolbar" id="floatingToolbar" style="display: none;">
                    <button class="fmt-btn" data-cmd="bold" title="Fett (Ctrl+B)"><strong>B</strong></button>
                    <button class="fmt-btn" data-cmd="italic" title="Kursiv (Ctrl+I)"><em>I</em></button>
                    <button class="fmt-btn" data-cmd="underline" title="Unterstrichen (Ctrl+U)"><u>U</u></button>
                    <div class="fmt-divider"></div>
                    <button class="fmt-btn" data-cmd="link" title="Link einfügen">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
                    </button>
                    <button class="fmt-btn" data-cmd="highlight" title="Hervorheben">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m9 11-6 6v3h9l3-3"/><path d="m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4"/></svg>
                    </button>
                </div>

                <!-- Context Menu -->
                <div class="context-menu" id="contextMenu" style="display: none;">
                    <div class="context-menu-item" data-action="edit">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
                        Bearbeiten
                    </div>
                    <div class="context-menu-item" data-action="duplicate">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                        Duplizieren
                    </div>
                    <div class="context-menu-item" data-action="moveUp">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m18 15-6-6-6 6"/></svg>
                        Nach oben
                    </div>
                    <div class="context-menu-item" data-action="moveDown">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
                        Nach unten
                    </div>
                    <div class="context-menu-divider"></div>
                    <div class="context-menu-item danger" data-action="delete">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
                        Löschen
                    </div>
                </div>

                <!-- Top Toolbar -->
                <div class="builder-toolbar-pro">
                    <div class="toolbar-section toolbar-left">
                        <button class="toolbar-btn back-btn" onclick="showView('dashboardView')" title="Zurück zum Dashboard">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 12H5M12 19l-7-7 7-7"/>
                            </svg>
                        </button>
                        <div class="toolbar-divider"></div>
                        <select id="visualEditorCVSelect" class="cv-selector-pro">
                            <option value="">CV auswählen...</option>
                        </select>
                        <div class="autosave-badge" id="autosaveIndicator">
                            <div class="save-dot"></div>
                            <span>Gespeichert</span>
                        </div>
                    </div>

                    <div class="toolbar-section toolbar-center">
                        <!-- Undo/Redo -->
                        <div class="toolbar-group">
                            <button class="toolbar-btn" id="undoBtn" title="Rückgängig (Ctrl+Z)" disabled>
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 7v6h6"/><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"/></svg>
                            </button>
                            <button class="toolbar-btn" id="redoBtn" title="Wiederholen (Ctrl+Y)" disabled>
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 7v6h-6"/><path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"/></svg>
                            </button>
                        </div>
                        <div class="toolbar-divider"></div>
                        <!-- Templates Dropdown -->
                        <div class="toolbar-group template-group">
                            <span class="toolbar-label">Layout:</span>
                            <div class="template-dropdown">
                                <button class="template-trigger" id="templateTrigger">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="3" y="3" width="7" height="18" rx="1"/><rect x="14" y="3" width="7" height="18" rx="1"/>
                                    </svg>
                                    <span id="templateName">Modern</span>
                                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
                                </button>
                                <div class="template-menu" id="templateMenu">
                                    <div class="template-category">
                                        <span class="category-label">Professionell</span>
                                        <button class="template-option active" data-template="modern">
                                            <div class="template-preview modern-preview"></div>
                                            <div class="template-info">
                                                <strong>Modern</strong>
                                                <span>2-Spalten Layout mit Sidebar</span>
                                            </div>
                                        </button>
                                        <button class="template-option" data-template="executive">
                                            <div class="template-preview executive-preview"></div>
                                            <div class="template-info">
                                                <strong>Executive</strong>
                                                <span>Elegant für Führungskräfte</span>
                                            </div>
                                        </button>
                                        <button class="template-option" data-template="classic">
                                            <div class="template-preview classic-preview"></div>
                                            <div class="template-info">
                                                <strong>Klassisch</strong>
                                                <span>Traditionelles Format</span>
                                            </div>
                                        </button>
                                    </div>
                                    <div class="template-category">
                                        <span class="category-label">Kreativ</span>
                                        <button class="template-option" data-template="creative">
                                            <div class="template-preview creative-preview"></div>
                                            <div class="template-info">
                                                <strong>Kreativ</strong>
                                                <span>Auffällig mit Farbakzenten</span>
                                            </div>
                                        </button>
                                        <button class="template-option" data-template="tech">
                                            <div class="template-preview tech-preview"></div>
                                            <div class="template-info">
                                                <strong>Tech</strong>
                                                <span>Modern für IT & Tech</span>
                                            </div>
                                        </button>
                                        <button class="template-option" data-template="bold">
                                            <div class="template-preview bold-preview"></div>
                                            <div class="template-info">
                                                <strong>Bold</strong>
                                                <span>Statement mit großen Titeln</span>
                                            </div>
                                        </button>
                                    </div>
                                    <div class="template-category">
                                        <span class="category-label">Minimalistisch</span>
                                        <button class="template-option" data-template="minimal">
                                            <div class="template-preview minimal-preview"></div>
                                            <div class="template-info">
                                                <strong>Minimal</strong>
                                                <span>Schlicht & elegant</span>
                                            </div>
                                        </button>
                                        <button class="template-option" data-template="clean">
                                            <div class="template-preview clean-preview"></div>
                                            <div class="template-info">
                                                <strong>Clean</strong>
                                                <span>Maximale Lesbarkeit</span>
                                            </div>
                                        </button>
                                        <button class="template-option" data-template="elegant">
                                            <div class="template-preview elegant-preview"></div>
                                            <div class="template-info">
                                                <strong>Elegant</strong>
                                                <span>Zeitlos & stilvoll</span>
                                            </div>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="toolbar-divider"></div>
                        <!-- Colors -->
                        <div class="toolbar-group color-group">
                            <span class="toolbar-label">Farbe:</span>
                            <div class="color-palette">
                                <button class="color-swatch active" data-color="blue" style="--swatch-color: #3b82f6" title="Blau"></button>
                                <button class="color-swatch" data-color="emerald" style="--swatch-color: #10b981" title="Smaragd"></button>
                                <button class="color-swatch" data-color="violet" style="--swatch-color: #8b5cf6" title="Violett"></button>
                                <button class="color-swatch" data-color="rose" style="--swatch-color: #f43f5e" title="Rose"></button>
                                <button class="color-swatch" data-color="amber" style="--swatch-color: #f59e0b" title="Amber"></button>
                                <button class="color-swatch" data-color="slate" style="--swatch-color: #475569" title="Schiefer"></button>
                                <button class="color-swatch custom-color" id="customColorBtn" title="Eigene Farbe">
                                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 2v4M12 18v4M2 12h4M18 12h4"/></svg>
                                </button>
                                <input type="color" id="customColorPicker" style="display: none;" value="#3b82f6">
                            </div>
                        </div>
                    </div>

                    <div class="toolbar-section toolbar-right">
                        <!-- Zoom -->
                        <div class="toolbar-group zoom-group">
                            <button class="toolbar-btn" id="zoomOutBtn" title="Verkleinern">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="8" y1="11" x2="14" y2="11"/></svg>
                            </button>
                            <div class="zoom-display" id="zoomLevel" title="Klicken zum Zurücksetzen">100%</div>
                            <button class="toolbar-btn" id="zoomInBtn" title="Vergrößern">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="11" y1="8" x2="11" y2="14"/><line x1="8" y1="11" x2="14" y2="11"/></svg>
                            </button>
                        </div>
                        <div class="toolbar-divider"></div>
                        <!-- Preview Mode -->
                        <button class="toolbar-btn" id="previewModeBtn" title="Vorschau-Modus (P)">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                        </button>
                        <div class="toolbar-divider"></div>
                        <!-- Export -->
                        <div class="export-dropdown">
                            <button class="toolbar-btn-primary" id="exportBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/>
                                </svg>
                                Export
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
                            </button>
                            <div class="export-menu" id="exportMenu">
                                <div class="export-option" data-format="pdf">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><path d="M9 15v-2h6v2"/><path d="M11 13v4"/><path d="M13 13v4"/></svg>
                                    <div>
                                        <strong>PDF Export</strong>
                                        <span>Für Bewerbungen & Druck</span>
                                    </div>
                                </div>
                                <div class="export-option" data-format="docx">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
                                    <div>
                                        <strong>Word Export</strong>
                                        <span>Editierbar in MS Word</span>
                                    </div>
                                </div>
                                <div class="export-option" data-format="png">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
                                    <div>
                                        <strong>Bild Export</strong>
                                        <span>PNG für Social Media</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Keyboard Shortcuts Help -->
                <div class="shortcuts-help" id="shortcutsHelp" style="display: none;">
                    <div class="shortcuts-header">
                        <h4>Tastenkürzel</h4>
                        <button class="btn-icon-sm" onclick="toggleShortcutsHelp()">×</button>
                    </div>
                    <div class="shortcuts-grid">
                        <div class="shortcut"><kbd>Ctrl</kbd>+<kbd>S</kbd> Speichern</div>
                        <div class="shortcut"><kbd>Ctrl</kbd>+<kbd>Z</kbd> Rückgängig</div>
                        <div class="shortcut"><kbd>Ctrl</kbd>+<kbd>Y</kbd> Wiederholen</div>
                        <div class="shortcut"><kbd>Ctrl</kbd>+<kbd>B</kbd> Fett</div>
                        <div class="shortcut"><kbd>Ctrl</kbd>+<kbd>I</kbd> Kursiv</div>
                        <div class="shortcut"><kbd>Ctrl</kbd>+<kbd>U</kbd> Unterstrichen</div>
                        <div class="shortcut"><kbd>P</kbd> Vorschau</div>
                        <div class="shortcut"><kbd>Esc</kbd> Abbrechen</div>
                        <div class="shortcut"><kbd>?</kbd> Diese Hilfe</div>
                    </div>
                </div>

                <!-- Main Builder Area -->
                <div class="builder-main-pro">
                    <!-- Left: Smart Section Navigator -->
                    <div class="section-navigator" id="sectionNavigator">
                        <div class="nav-header">
                            <h3>
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
                                Sektionen
                            </h3>
                            <button class="nav-toggle" id="navToggle" title="Einklappen">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m15 18-6-6 6-6"/></svg>
                            </button>
                        </div>
                        <div class="nav-sections" id="navSections">
                            <!-- Sections werden dynamisch eingefügt mit drag handles -->
                        </div>
                        <div class="nav-footer">
                            <button class="add-section-btn" id="addSectionBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
                                </svg>
                                Sektion hinzufügen
                            </button>
                        </div>
                    </div>

                    <!-- Center: Live CV Canvas -->
                    <div class="cv-canvas-area" id="cvCanvasArea">
                        <div class="canvas-scroll" id="canvasScroll">
                            <div class="cv-canvas" id="cvCanvas" data-template="modern" data-color="blue">
                                <!-- Loading State -->
                                <div class="canvas-loading" id="canvasLoading">
                                    <div class="loading-animation">
                                        <div class="loading-doc">
                                            <div class="loading-line w-60"></div>
                                            <div class="loading-line w-40"></div>
                                            <div class="loading-line w-80"></div>
                                            <div class="loading-line w-50"></div>
                                        </div>
                                    </div>
                                    <p>Wähle einen Lebenslauf aus...</p>
                                </div>

                                <!-- CV Document -->
                                <div class="cv-document" id="cvDocument" style="display: none;">
                                    <!-- Header Section -->
                                    <section class="cv-sec cv-sec-header" data-section="header" data-draggable="false">
                                        <div class="sec-overlay"></div>
                                        <div class="photo-wrapper">
                                            <div class="photo-container" id="photoContainer">
                                                <div class="photo-placeholder" id="photoPlaceholder">
                                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                                        <circle cx="12" cy="7" r="4"/>
                                                    </svg>
                                                </div>
                                                <img class="photo-img" id="photoImg" src="" alt="" style="display: none;">
                                                <div class="photo-overlay">
                                                    <button class="photo-btn upload" id="photoUploadBtn" title="Foto hochladen">
                                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                                                    </button>
                                                    <button class="photo-btn remove" id="photoRemoveBtn" title="Foto entfernen" style="display: none;">
                                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                                                    </button>
                                                </div>
                                            </div>
                                            <input type="file" id="photoInput" accept="image/*" style="display: none;">
                                        </div>
                                        <div class="header-content">
                                            <h1 class="cv-name live-edit" data-field="fullname" data-placeholder="Dein vollständiger Name"></h1>
                                            <p class="cv-title live-edit" data-field="job_title" data-placeholder="Deine Berufsbezeichnung"></p>
                                            <div class="cv-contact-row">
                                                <span class="contact-chip" data-field="email">
                                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="m22 7-10 5L2 7"/></svg>
                                                    <span class="live-edit" data-field="email" data-placeholder="email@beispiel.de"></span>
                                                </span>
                                                <span class="contact-chip" data-field="phone">
                                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
                                                    <span class="live-edit" data-field="phone" data-placeholder="+49 123 456789"></span>
                                                </span>
                                                <span class="contact-chip" data-field="location">
                                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                                                    <span class="live-edit" data-field="location" data-placeholder="Stadt, Land"></span>
                                                </span>
                                                <span class="contact-chip optional" data-field="linkedin" style="display: none;">
                                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg>
                                                    <span class="live-edit" data-field="linkedin" data-placeholder="LinkedIn URL"></span>
                                                </span>
                                                <span class="contact-chip optional" data-field="website" style="display: none;">
                                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                                                    <span class="live-edit" data-field="website" data-placeholder="www.beispiel.de"></span>
                                                </span>
                                            </div>
                                        </div>
                                    </section>

                                    <!-- Summary Section -->
                                    <section class="cv-sec cv-sec-summary" data-section="summary" data-draggable="true">
                                        <div class="sec-controls">
                                            <button class="sec-ctrl drag-handle" title="Ziehen zum Verschieben">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="5" r="1"/><circle cx="9" cy="12" r="1"/><circle cx="9" cy="19" r="1"/><circle cx="15" cy="5" r="1"/><circle cx="15" cy="12" r="1"/><circle cx="15" cy="19" r="1"/></svg>
                                            </button>
                                            <button class="sec-ctrl toggle-vis" title="Ein-/Ausblenden">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                                            </button>
                                            <button class="sec-ctrl sec-settings" title="Sektion anpassen" onclick="openSectionSettings('summary')">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                                            </button>
                                        </div>
                                        <div class="sec-overlay"></div>
                                        <h2 class="sec-title editable-title" contenteditable="true" data-section="summary" data-default="Profil">
                                            <span class="sec-icon" data-icon="user">
                                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                                            </span>
                                            <span class="sec-title-text">Profil</span>
                                        </h2>
                                        <div class="sec-content">
                                            <p class="summary-text live-edit multiline" data-field="summary" data-placeholder="Beschreibe dich kurz und professionell. Was macht dich aus? Was sind deine Stärken und Ziele?"></p>
                                        </div>
                                    </section>

                                    <!-- Experience Section -->
                                    <section class="cv-sec cv-sec-experience" data-section="experience" data-draggable="true">
                                        <div class="sec-controls">
                                            <button class="sec-ctrl drag-handle" title="Ziehen zum Verschieben">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="5" r="1"/><circle cx="9" cy="12" r="1"/><circle cx="9" cy="19" r="1"/><circle cx="15" cy="5" r="1"/><circle cx="15" cy="12" r="1"/><circle cx="15" cy="19" r="1"/></svg>
                                            </button>
                                            <button class="sec-ctrl toggle-vis" title="Ein-/Ausblenden">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                                            </button>
                                            <button class="sec-ctrl sec-settings" title="Sektion anpassen" onclick="openSectionSettings('experience')">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                                            </button>
                                        </div>
                                        <div class="sec-overlay"></div>
                                        <div class="sec-header-row">
                                            <h2 class="sec-title editable-title" data-section="experience" data-default="Berufserfahrung">
                                                <span class="sec-icon" data-icon="briefcase">
                                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>
                                                </span>
                                                <span class="sec-title-text" contenteditable="true">Berufserfahrung</span>
                                            </h2>
                                            <button class="sec-add-btn" onclick="addExperienceItem()" title="Position hinzufügen">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                                            </button>
                                        </div>
                                        <div class="sec-content">
                                            <div class="items-list timeline-list" id="experienceItems">
                                                <!-- Experience items -->
                                            </div>
                                            <button class="add-item-inline" onclick="addExperienceItem()">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                                                Position hinzufügen
                                            </button>
                                        </div>
                                    </section>

                                    <!-- Education Section -->
                                    <section class="cv-sec cv-sec-education" data-section="education" data-draggable="true">
                                        <div class="sec-controls">
                                            <button class="sec-ctrl drag-handle" title="Ziehen zum Verschieben">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="5" r="1"/><circle cx="9" cy="12" r="1"/><circle cx="9" cy="19" r="1"/><circle cx="15" cy="5" r="1"/><circle cx="15" cy="12" r="1"/><circle cx="15" cy="19" r="1"/></svg>
                                            </button>
                                            <button class="sec-ctrl toggle-vis" title="Ein-/Ausblenden">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                                            </button>
                                            <button class="sec-ctrl sec-settings" title="Sektion anpassen" onclick="openSectionSettings('education')">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
                                            </button>
                                        </div>
                                        <div class="sec-overlay"></div>
                                        <div class="sec-header-row">
                                            <h2 class="sec-title editable-title" data-section="education" data-default="Ausbildung">
                                                <span class="sec-icon" data-icon="graduation">
                                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
                                                </span>
                                                <span class="sec-title-text" contenteditable="true">Ausbildung</span>
                                            </h2>
                                            <button class="sec-add-btn" onclick="addEducationItem()" title="Ausbildung hinzufügen">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                                            </button>
                                        </div>
                                        <div class="sec-content">
                                            <div class="items-list timeline-list" id="educationItems">
                                                <!-- Education items -->
                                            </div>
                                            <button class="add-item-inline" onclick="addEducationItem()">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                                                Ausbildung hinzufügen
                                            </button>
                                        </div>
                                    </section>

                                    <!-- Skills Section -->
                                    <section class="cv-sec cv-sec-skills" data-section="skills" data-draggable="true">
                                        <div class="sec-controls">
                                            <button class="sec-ctrl drag-handle" title="Ziehen zum Verschieben">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="5" r="1"/><circle cx="9" cy="12" r="1"/><circle cx="9" cy="19" r="1"/><circle cx="15" cy="5" r="1"/><circle cx="15" cy="12" r="1"/><circle cx="15" cy="19" r="1"/></svg>
                                            </button>
                                            <button class="sec-ctrl toggle-vis" title="Ein-/Ausblenden">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                                            </button>
                                            <button class="sec-ctrl sec-settings" title="Sektion anpassen" onclick="openSectionSettings('skills')">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
                                            </button>
                                        </div>
                                        <div class="sec-overlay"></div>
                                        <div class="sec-header-row">
                                            <h2 class="sec-title editable-title" data-section="skills" data-default="Fähigkeiten">
                                                <span class="sec-icon" data-icon="star">
                                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
                                                </span>
                                                <span class="sec-title-text" contenteditable="true">Fähigkeiten</span>
                                            </h2>
                                            <div class="sec-controls-inline">
                                                <select class="skills-display-select" id="skillsDisplayStyle" title="Darstellung ändern">
                                                    <option value="tags">Tags</option>
                                                    <option value="bars">Balken</option>
                                                    <option value="dots">Punkte</option>
                                                    <option value="percentage">Prozent</option>
                                                    <option value="list">Liste</option>
                                                </select>
                                                <button class="sec-add-btn" onclick="addSkillItem()" title="Skill hinzufügen">
                                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="sec-content">
                                            <div class="skills-container" id="skillsContainer" data-display="tags">
                                                <div class="skills-cloud" id="skillsCloud">
                                                    <!-- Skills as tags -->
                                                </div>
                                            </div>
                                            <button class="add-item-inline" onclick="addSkillItem()">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                                                Skill hinzufügen
                                            </button>
                                        </div>
                                    </section>

                                    <!-- Languages Section -->
                                    <section class="cv-sec cv-sec-languages" data-section="languages" data-draggable="true">
                                        <div class="sec-controls">
                                            <button class="sec-ctrl drag-handle" title="Ziehen zum Verschieben">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="5" r="1"/><circle cx="9" cy="12" r="1"/><circle cx="9" cy="19" r="1"/><circle cx="15" cy="5" r="1"/><circle cx="15" cy="12" r="1"/><circle cx="15" cy="19" r="1"/></svg>
                                            </button>
                                            <button class="sec-ctrl toggle-vis" title="Ein-/Ausblenden">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                                            </button>
                                            <button class="sec-ctrl sec-settings" title="Sektion anpassen" onclick="openSectionSettings('languages')">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
                                            </button>
                                        </div>
                                        <div class="sec-overlay"></div>
                                        <div class="sec-header-row">
                                            <h2 class="sec-title editable-title" data-section="languages" data-default="Sprachen">
                                                <span class="sec-icon" data-icon="globe">
                                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                                                </span>
                                                <span class="sec-title-text" contenteditable="true">Sprachen</span>
                                            </h2>
                                            <div class="sec-controls-inline">
                                                <select class="lang-display-select" id="langDisplayStyle" title="Darstellung ändern">
                                                    <option value="bars">Balken</option>
                                                    <option value="circles">Kreise</option>
                                                    <option value="text">Text</option>
                                                    <option value="flags">Mit Flaggen</option>
                                                </select>
                                                <button class="sec-add-btn" onclick="addLanguageItem()" title="Sprache hinzufügen">
                                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="sec-content">
                                            <div class="languages-container" id="languagesContainer" data-display="bars">
                                                <div class="languages-grid" id="languagesGrid">
                                                    <!-- Languages with level bars -->
                                                </div>
                                            </div>
                                            <button class="add-item-inline" onclick="addLanguageItem()">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                                                Sprache hinzufügen
                                            </button>
                                        </div>
                                    </section>

                                    <!-- Additional Sections Container -->
                                    <div id="additionalSections">
                                        <!-- Dynamically added sections (Certifications, Projects, etc.) -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Zoom Minimap -->
                        <div class="canvas-minimap" id="canvasMinimap">
                            <div class="minimap-viewport" id="minimapViewport"></div>
                        </div>
                    </div>

                    <!-- Right: Smart Properties Panel -->
                    <div class="properties-panel-pro" id="propertiesPanel">
                        <div class="panel-tabs">
                            <button class="panel-tab active" data-panel="style">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="13.5" cy="6.5" r="0.5"/><circle cx="17.5" cy="10.5" r="0.5"/><circle cx="8.5" cy="7.5" r="0.5"/><circle cx="6.5" cy="12.5" r="0.5"/><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.555C21.965 6.012 17.461 2 12 2z"/></svg>
                                Design
                            </button>
                            <button class="panel-tab" data-panel="settings">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
                                Optionen
                            </button>
                        </div>

                        <div class="panel-content" id="panelContent">
                            <!-- Style Panel -->
                            <div class="panel-section style-panel active" data-panel="style">
                                <div class="prop-group">
                                    <label class="prop-label">Schriftart</label>
                                    <select class="prop-select" id="fontSelect">
                                        <option value="Inter">Inter (Modern)</option>
                                        <option value="Roboto">Roboto</option>
                                        <option value="Open Sans">Open Sans</option>
                                        <option value="Lato">Lato</option>
                                        <option value="Montserrat">Montserrat</option>
                                        <option value="Poppins">Poppins</option>
                                        <option value="Georgia">Georgia (Serif)</option>
                                        <option value="Merriweather">Merriweather (Serif)</option>
                                    </select>
                                </div>

                                <div class="prop-group">
                                    <label class="prop-label">Schriftgröße</label>
                                    <div class="prop-slider-row">
                                        <input type="range" class="prop-slider" id="fontSizeSlider" min="10" max="16" value="12">
                                        <span class="prop-value" id="fontSizeValue">12px</span>
                                    </div>
                                </div>

                                <div class="prop-group">
                                    <label class="prop-label">Zeilenabstand</label>
                                    <div class="prop-slider-row">
                                        <input type="range" class="prop-slider" id="lineHeightSlider" min="1.2" max="2" step="0.1" value="1.5">
                                        <span class="prop-value" id="lineHeightValue">1.5</span>
                                    </div>
                                </div>

                                <div class="prop-group">
                                    <label class="prop-label">Seitenränder</label>
                                    <div class="prop-slider-row">
                                        <input type="range" class="prop-slider" id="marginSlider" min="20" max="60" value="40">
                                        <span class="prop-value" id="marginValue">40px</span>
                                    </div>
                                </div>

                                <div class="prop-divider"></div>

                                <div class="prop-group">
                                    <label class="prop-label">Akzentfarbe Stärke</label>
                                    <div class="prop-btn-group">
                                        <button class="prop-btn" data-accent="light">Leicht</button>
                                        <button class="prop-btn active" data-accent="medium">Mittel</button>
                                        <button class="prop-btn" data-accent="strong">Stark</button>
                                    </div>
                                </div>

                                <div class="prop-group">
                                    <label class="prop-label">Foto-Stil</label>
                                    <div class="prop-btn-group">
                                        <button class="prop-btn" data-photo="square">Eckig</button>
                                        <button class="prop-btn active" data-photo="rounded">Rund</button>
                                        <button class="prop-btn" data-photo="circle">Kreis</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Settings Panel -->
                            <div class="panel-section settings-panel" data-panel="settings">
                                <div class="prop-group">
                                    <label class="prop-label">Sichtbare Kontaktinfos</label>
                                    <div class="prop-checkboxes">
                                        <label class="prop-checkbox">
                                            <input type="checkbox" id="showEmail" checked> E-Mail
                                        </label>
                                        <label class="prop-checkbox">
                                            <input type="checkbox" id="showPhone" checked> Telefon
                                        </label>
                                        <label class="prop-checkbox">
                                            <input type="checkbox" id="showLocation" checked> Standort
                                        </label>
                                        <label class="prop-checkbox">
                                            <input type="checkbox" id="showLinkedin"> LinkedIn
                                        </label>
                                        <label class="prop-checkbox">
                                            <input type="checkbox" id="showWebsite"> Website
                                        </label>
                                    </div>
                                </div>

                                <div class="prop-divider"></div>

                                <div class="prop-group">
                                    <label class="prop-label">PDF Einstellungen</label>
                                    <div class="prop-checkboxes">
                                        <label class="prop-checkbox">
                                            <input type="checkbox" id="pdfHighQuality" checked> Hohe Qualität
                                        </label>
                                        <label class="prop-checkbox">
                                            <input type="checkbox" id="pdfIncludePhoto" checked> Foto einschließen
                                        </label>
                                        <label class="prop-checkbox">
                                            <input type="checkbox" id="pdfA4" checked> A4 Format
                                        </label>
                                    </div>
                                </div>

                                <div class="prop-divider"></div>

                                <div class="prop-group">
                                    <label class="prop-label">Tastenkürzel</label>
                                    <button class="prop-btn-full" onclick="toggleShortcutsHelp()">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M6 8h.001M10 8h.001M14 8h.001M18 8h.001M8 12h8M6 16h.001M18 16h.001"/></svg>
                                        Alle Shortcuts anzeigen
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Actions -->
                        <div class="panel-footer">
                            <button class="quick-action" id="duplicateCVBtn" title="CV duplizieren">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                            </button>
                            <button class="quick-action" id="resetStyleBtn" title="Design zurücksetzen">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
                            </button>
                            <button class="quick-action" id="helpBtn" title="Hilfe">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Item Edit Modal -->
            <div class="edit-modal" id="itemEditModal" style="display: none;">
                <div class="modal-backdrop" onclick="closeItemModal()"></div>
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="modalTitle">Element bearbeiten</h3>
                        <button class="modal-close" onclick="closeItemModal()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                        </button>
                    </div>
                    <div class="modal-body" id="modalBody">
                        <!-- Dynamic content -->
                    </div>
                    <div class="modal-footer">
                        <button class="btn-secondary" onclick="closeItemModal()">Abbrechen</button>
                        <button class="btn-primary" id="modalSaveBtn">Speichern</button>
                    </div>
                </div>
            </div>

            <!-- Add Section Modal -->
            <div class="add-section-modal" id="addSectionModal" style="display: none;">
                <div class="modal-backdrop" onclick="closeAddSectionModal()"></div>
                <div class="modal-content compact">
                    <div class="modal-header">
                        <h3>Sektion hinzufügen</h3>
                        <button class="modal-close" onclick="closeAddSectionModal()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                        </button>
                    </div>
                    <div class="section-options">
                        <button class="section-option" data-section="certifications">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></svg>
                            <span>Zertifikate</span>
                        </button>
                        <button class="section-option" data-section="projects">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
                            <span>Projekte</span>
                        </button>
                        <button class="section-option" data-section="interests">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
                            <span>Interessen</span>
                        </button>
                        <button class="section-option" data-section="references">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                            <span>Referenzen</span>
                        </button>
                        <button class="section-option" data-section="publications">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>
                            <span>Publikationen</span>
                        </button>
                        <button class="section-option" data-section="custom">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
                            <span>Eigene Sektion</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Privacy & Security View -->
        <div id="privacyView" class="view">
            <h1>Privacy & Security</h1>

            <!-- Security Status Card -->
            <div class="security-status-card">
                <div class="security-header">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#10B981" stroke-width="2">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                        <path d="M9 12l2 2 4-4"></path>
                    </svg>
                    <div>
                        <h2 id="securityStatus">Encrypted & Secure</h2>
                        <p id="securitySubtitle">All your data is encrypted with AES-256</p>
                    </div>
                </div>

                <div id="securityDetails" class="security-details"></div>
            </div>

            <!-- GDPR Compliance -->
            <div class="compliance-section">
                <h2>GDPR/DSGVO Compliance</h2>
                <div id="gdprArticles" class="gdpr-articles"></div>
            </div>

            <!-- User Rights -->
            <div class="user-rights-section">
                <h2>Your Data Rights</h2>
                <div class="rights-buttons">
                    <button class="btn-primary" id="exportAllDataBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        Export All My Data (Art. 20 GDPR)
                    </button>

                    <button class="btn-secondary" id="viewComplianceLogBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                        </svg>
                        View Compliance Log (Art. 15 GDPR)
                    </button>

                    <button class="btn-secondary btn-danger" id="deleteAllDataBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        </svg>
                        Delete All My Data (Art. 17 GDPR)
                    </button>
                </div>
            </div>
        </div>

        <!-- Settings View -->
        <div id="settingsView" class="view">
            <h1>Settings</h1>

            <!-- Consent Management -->
            <div class="settings-section">
                <h2>Data Processing Consent</h2>
                <div id="consentStatus"></div>

                <div class="consent-buttons">
                    <button class="btn-secondary btn-danger" id="withdrawConsentBtn">
                        Withdraw Consent (Art. 7(3) GDPR)
                    </button>
                </div>
            </div>

            <div class="settings-section">
                <h2>Theme</h2>
                <button class="btn-secondary" id="themeToggleBtn">
                    Toggle Light/Dark Mode
                </button>
            </div>
        </div>

        <!-- Audit Log View -->
        <div id="auditView" class="view">
            <div class="view-header">
                <h1>
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                        <path d="M9 12h6"></path>
                        <path d="M9 16h6"></path>
                    </svg>
                    <span data-i18n="audit.title">Audit Log</span>
                </h1>
                <p data-i18n="audit.subtitle">Track all user activities and system events</p>
            </div>

            <!-- Statistics Cards -->
            <div class="stats-grid" id="auditStatsGrid">
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2"></path>
                        </svg>
                    </div>
                    <div class="stat-info">
                        <h3 data-i18n="audit.stats.total_events">Total Events</h3>
                        <p class="stat-value" id="totalEvents">-</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #43cea2 0%, #185a9d 100%);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                        </svg>
                    </div>
                    <div class="stat-info">
                        <h3 data-i18n="audit.stats.today">Today</h3>
                        <p class="stat-value" id="todayEvents">-</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                    </div>
                    <div class="stat-info">
                        <h3 data-i18n="audit.stats.success_rate">Success Rate</h3>
                        <p class="stat-value" id="successRate">-</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                    </div>
                    <div class="stat-info">
                        <h3 data-i18n="audit.stats.last_hour">Last Hour</h3>
                        <p class="stat-value" id="lastHourEvents">-</p>
                    </div>
                </div>
            </div>

            <!-- Filters & Search -->
            <div class="audit-filters-card">
                <div class="filter-header">
                    <h2 data-i18n="audit.filters.title">Filters</h2>
                    <button class="btn-secondary btn-sm" id="auditResetFiltersBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="1 4 1 10 7 10"></polyline>
                            <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
                        </svg>
                        <span data-i18n="audit.filters.reset">Reset</span>
                    </button>
                </div>

                <div class="filters-grid">
                    <!-- Date Range -->
                    <div class="filter-group">
                        <label data-i18n="audit.filters.date_range">Date Range</label>
                        <div class="date-range-inputs">
                            <input type="date" id="auditStartDate" class="input">
                            <span style="color: var(--text-secondary); padding: 0 8px;">-</span>
                            <input type="date" id="auditEndDate" class="input">
                        </div>
                    </div>

                    <!-- Event Type -->
                    <div class="filter-group">
                        <label data-i18n="audit.filters.event_type">Event Type</label>
                        <select id="auditEventTypeFilter" class="input">
                            <option value="" data-i18n="audit.filters.all">All</option>
                            <option value="cv_created">CV Created</option>
                            <option value="cv_updated">CV Updated</option>
                            <option value="cv_deleted">CV Deleted</option>
                            <option value="cv_exported">CV Exported</option>
                        </select>
                    </div>

                    <!-- Category -->
                    <div class="filter-group">
                        <label data-i18n="audit.filters.category">Category</label>
                        <select id="auditCategoryFilter" class="input">
                            <option value="" data-i18n="audit.filters.all">All</option>
                            <option value="cv_management">CV Management</option>
                            <option value="auth">Authentication</option>
                            <option value="settings">Settings</option>
                            <option value="data_export">Data Export</option>
                            <option value="error">Errors</option>
                        </select>
                    </div>

                    <!-- Success/Failure -->
                    <div class="filter-group">
                        <label data-i18n="audit.filters.status">Status</label>
                        <select id="auditStatusFilter" class="input">
                            <option value="" data-i18n="audit.filters.all">All</option>
                            <option value="success" data-i18n="audit.filters.success">Success</option>
                            <option value="failure" data-i18n="audit.filters.failure">Failure</option>
                        </select>
                    </div>
                </div>

                <div class="filter-actions">
                    <button class="btn-primary" id="auditApplyFiltersBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                        </svg>
                        <span data-i18n="audit.filters.apply">Apply Filters</span>
                    </button>
                    <button class="btn-secondary" id="auditExportBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        <span data-i18n="audit.filters.export">Export</span>
                    </button>
                </div>
            </div>

            <!-- Events List -->
            <div class="audit-events-card">
                <div class="card-header">
                    <h2 data-i18n="audit.events.title">Activity Events</h2>
                    <div class="audit-event-count">
                        <span id="auditEventCount">0</span>
                        <span data-i18n="audit.events.events">events</span>
                    </div>
                </div>

                <div class="audit-events-list" id="auditEventsList">
                    <!-- Events will be dynamically loaded -->
                    <div class="empty-state" id="auditEmptyState">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.3">
                            <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2"></path>
                            <path d="M9 12h6"></path>
                            <path d="M9 16h6"></path>
                        </svg>
                        <p data-i18n="audit.events.empty">No audit events found</p>
                    </div>
                </div>

                <div class="audit-pagination" id="auditPagination" style="display: none;">
                    <button class="btn-secondary btn-sm" id="auditPrevBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                        <span data-i18n="audit.pagination.prev">Previous</span>
                    </button>
                    <span class="pagination-info">
                        <span data-i18n="audit.pagination.page">Page</span>
                        <span id="auditCurrentPage">1</span>
                        <span data-i18n="audit.pagination.of">of</span>
                        <span id="auditTotalPages">1</span>
                    </span>
                    <button class="btn-secondary btn-sm" id="auditNextBtn">
                        <span data-i18n="audit.pagination.next">Next</span>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Update History View -->
        <div id="updatesView" class="view">
            <div class="view-header">
                <h1>
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    Update-Historie
                </h1>
                <p class="view-subtitle">Versionshistorie und Changelog</p>
            </div>

            <!-- Current Version Info -->
            <div class="version-banner">
                <div class="version-banner-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                        <path d="M9 12l2 2 4-4"></path>
                    </svg>
                </div>
                <div class="version-banner-content">
                    <div class="version-current">
                        <span class="version-label">Aktuelle Version:</span>
                        <span class="version-number" id="currentVersionNumber">Loading...</span>
                    </div>
                    <div class="version-build-info" id="buildInfoText">Build wird geladen...</div>
                </div>
            </div>

            <!-- Check for Updates Button -->
            <div class="update-check-section">
                <button id="checkForUpdatesBtn" class="btn-primary">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                    Nach Updates suchen
                </button>
                <p class="update-check-status" id="updateCheckStatus" style="margin-top: 12px; font-size: 13px; color: var(--text-secondary);"></p>
            </div>

            <!-- Update History Table -->
            <div class="updates-container">
                <div id="updateHistoryList" class="update-history-list">
                    <!-- Updates will be rendered here -->
                </div>
            </div>
        </div>

        <!-- Editor View -->
        <div id="editorView" class="view">
            <div class="editor-header">
                <button id="backBtn" class="btn-back">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"/>
                    </svg>
                    Back to Dashboard
                </button>

                <div class="editor-actions">
                    <button id="saveBtn" class="btn-primary">Save</button>
                    <button id="exportBtn" class="btn-secondary">Export PDF</button>
                </div>
            </div>

            <div class="editor-content" id="editorContent">
                <!-- Editor form will be inserted here -->
            </div>
        </div>
    </main>

    <!-- Compliance Log Modal -->
    <div id="complianceLogModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Compliance Log</h3>
                <button class="btn-close-modal">&times;</button>
            </div>
            <div id="complianceLogContent" class="compliance-log-content"></div>
        </div>
    </div>

    <!-- Custom Modal System (Alert/Confirm) -->
    <div id="customModal" class="custom-modal" style="display: none;">
        <div class="custom-modal-backdrop"></div>
        <div class="custom-modal-content">
            <div class="custom-modal-icon" id="customModalIcon">
                <!-- Icon will be injected here -->
            </div>
            <h3 id="customModalTitle" class="custom-modal-title"></h3>
            <p id="customModalMessage" class="custom-modal-message"></p>
            <div class="custom-modal-buttons" id="customModalButtons">
                <!-- Buttons will be injected here -->
            </div>
        </div>
    </div>

    <!-- Quick Create CV Modal -->
    <div id="quickCreateModal" class="custom-modal" style="display: none;">
        <div class="custom-modal-backdrop"></div>
        <div class="custom-modal-content" style="max-width: 600px;">
            <button class="modal-close-btn" id="closeQuickCreate">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>

            <div class="quick-create-header">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="9" y1="15" x2="15" y2="15"></line>
                    <line x1="12" y1="12" x2="12" y2="18"></line>
                </svg>
                <h2 data-i18n="quickCreate.title">Neuen Lebenslauf erstellen</h2>
                <p data-i18n="quickCreate.subtitle">Fülle die wichtigsten Informationen aus und beginne sofort</p>
            </div>

            <form id="quickCreateForm" class="quick-create-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="qc-firstname">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            <span data-i18n="editor.fields.firstname">Vorname</span>
                        </label>
                        <input type="text" id="qc-firstname" placeholder="Max" required>
                    </div>
                    <div class="form-group">
                        <label for="qc-lastname">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            <span data-i18n="editor.fields.lastname">Nachname</span>
                        </label>
                        <input type="text" id="qc-lastname" placeholder="Mustermann" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="qc-email">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                            <polyline points="22,6 12,13 2,6"></polyline>
                        </svg>
                        <span data-i18n="editor.fields.email">E-Mail</span>
                    </label>
                    <input type="email" id="qc-email" placeholder="max.mustermann@beispiel.de" required>
                </div>

                <div class="form-group">
                    <label for="qc-job">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                            <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
                        </svg>
                        <span data-i18n="editor.fields.jobTitle">Berufsbezeichnung</span>
                    </label>
                    <input type="text" id="qc-job" placeholder="Software Entwickler" required>
                </div>

                <div class="form-group">
                    <label for="qc-phone">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                        </svg>
                        <span data-i18n="editor.fields.phone">Telefon</span>
                    </label>
                    <input type="tel" id="qc-phone" placeholder="+49 123 456789">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="qc-template">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                            </svg>
                            <span data-i18n="editor.fields.template">Vorlage</span>
                        </label>
                        <select id="qc-template">
                            <option value="modern">Modern (2-Spaltig)</option>
                            <option value="classic">Klassisch (Einspaltig)</option>
                            <option value="creative">Kreativ (Farbenfroh)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="qc-color">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <circle cx="12" cy="12" r="10"></circle>
                                <circle cx="12" cy="12" r="4"></circle>
                            </svg>
                            <span data-i18n="editor.fields.colorScheme">Farbschema</span>
                        </label>
                        <select id="qc-color">
                            <option value="blue">Professionelles Blau</option>
                            <option value="green">Frisches Grün</option>
                            <option value="purple" selected>Kreatives Lila</option>
                            <option value="red">Mutiges Rot</option>
                            <option value="orange">Warmes Orange</option>
                            <option value="dark">Elegantes Dunkel</option>
                        </select>
                    </div>
                </div>

                <div class="quick-create-actions">
                    <button type="button" class="btn-secondary" id="cancelQuickCreate">Abbrechen</button>
                    <button type="submit" class="btn-primary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                        Lebenslauf erstellen
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Application Create/Edit Modal -->
    <div id="applicationModal" class="custom-modal" style="display: none;">
        <div class="custom-modal-backdrop"></div>
        <div class="custom-modal-content application-modal-content">
            <button class="modal-close-btn" id="closeApplicationModal">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>

            <div class="application-modal-header">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--accent-primary)" stroke-width="2">
                    <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                </svg>
                <h2 id="applicationModalTitle" data-i18n="applications.modal.title">Neue Bewerbung</h2>
                <p data-i18n="applications.modal.subtitle">Fülle alle relevanten Informationen aus</p>
            </div>

            <form id="applicationForm" class="application-form">
                <input type="hidden" id="app-id">

                <!-- Job Details Section -->
                <div class="form-section">
                    <h3>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 7h-9"></path>
                            <path d="M14 17H5"></path>
                            <circle cx="17" cy="17" r="3"></circle>
                            <circle cx="7" cy="7" r="3"></circle>
                        </svg>
                        Stellendetails
                    </h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="app-job-title">Stellentitel <span class="required">*</span></label>
                            <input type="text" id="app-job-title" placeholder="z.B. Senior Software Developer" required>
                        </div>
                        <div class="form-group">
                            <label for="app-company">Unternehmen <span class="required">*</span></label>
                            <input type="text" id="app-company" placeholder="z.B. Google Germany GmbH" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="app-location">Standort</label>
                            <input type="text" id="app-location" placeholder="z.B. Berlin, Deutschland">
                        </div>
                        <div class="form-group">
                            <label for="app-salary">Gehalt</label>
                            <input type="text" id="app-salary" placeholder="z.B. 60.000 - 80.000 EUR">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="app-job-type">Vertragsart</label>
                            <select id="app-job-type">
                                <option value="Full-time">Vollzeit</option>
                                <option value="Part-time">Teilzeit</option>
                                <option value="Contract">Vertrag</option>
                                <option value="Freelance">Freelance</option>
                                <option value="Internship">Praktikum</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Arbeitsmodell</label>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="app-remote">
                                    <span>Remote möglich</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="app-hybrid">
                                    <span>Hybrid</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Application Details Section -->
                <div class="form-section">
                    <h3>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                        </svg>
                        Bewerbungsdetails
                    </h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="app-cv">Verwendeter Lebenslauf</label>
                            <select id="app-cv">
                                <option value="">Lebenslauf auswählen...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="app-status">Status</label>
                            <select id="app-status">
                                <option value="draft">Entwurf</option>
                                <option value="applied">Beworben</option>
                                <option value="under_review">Wird geprüft</option>
                                <option value="interview_scheduled">Vorstellungsgespräch geplant</option>
                                <option value="interviewed">Vorstellungsgespräch abgeschlossen</option>
                                <option value="second_round">Zweite Runde</option>
                                <option value="offer">Angebot erhalten</option>
                                <option value="accepted">Angenommen</option>
                                <option value="rejected">Abgelehnt</option>
                                <option value="withdrawn">Zurückgezogen</option>
                                <option value="no_response">Keine Antwort</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="app-portal">Job-Portal <span class="required">*</span></label>
                            <select id="app-portal" required>
                                <option value="">Portal auswählen...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="app-priority">Priorität</label>
                            <select id="app-priority">
                                <option value="1">1 - Niedrig</option>
                                <option value="2">2</option>
                                <option value="3" selected>3 - Mittel</option>
                                <option value="4">4</option>
                                <option value="5">5 - Hoch</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="app-portal-url">Link zur Stellenanzeige</label>
                            <input type="url" id="app-portal-url" placeholder="https://...">
                        </div>
                        <div class="form-group">
                            <label for="app-company-website">Firmen-Website</label>
                            <input type="url" id="app-company-website" placeholder="https://...">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="app-applied-date">Bewerbungsdatum</label>
                            <input type="date" id="app-applied-date">
                        </div>
                        <div class="form-group">
                            <label for="app-deadline">Bewerbungsfrist</label>
                            <input type="date" id="app-deadline">
                        </div>
                    </div>
                </div>

                <!-- Contact Section -->
                <div class="form-section">
                    <h3>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                        Ansprechpartner
                    </h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="app-contact-name">Name</label>
                            <input type="text" id="app-contact-name" placeholder="z.B. Max Mustermann">
                        </div>
                        <div class="form-group">
                            <label for="app-contact-email">E-Mail</label>
                            <input type="email" id="app-contact-email" placeholder="max.mustermann@firma.de">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="app-contact-phone">Telefon</label>
                        <input type="tel" id="app-contact-phone" placeholder="+49 123 456789">
                    </div>
                </div>

                <!-- Notes & Tags Section -->
                <div class="form-section">
                    <h3>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 20h9"></path>
                            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
                        </svg>
                        Notizen & Tags
                    </h3>
                    <div class="form-group">
                        <label for="app-notes">Notizen</label>
                        <textarea id="app-notes" rows="4" placeholder="Persönliche Notizen zur Bewerbung..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="app-tags">Tags (durch Komma getrennt)</label>
                        <input type="text" id="app-tags" placeholder="Remote, Senior, Startup">
                    </div>
                    <div class="form-group">
                        <label for="app-job-description">Stellenbeschreibung</label>
                        <textarea id="app-job-description" rows="6" placeholder="Kopiere hier die Stellenbeschreibung ein..."></textarea>
                    </div>
                </div>

                <div class="application-modal-actions">
                    <button type="button" class="btn-secondary" id="cancelApplication">Abbrechen</button>
                    <button type="submit" class="btn-primary">
                        <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                        </svg>
                        Speichern
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Quick Settings Panel (Floating) -->
    <div class="quick-settings-panel" id="quickSettingsPanel">
        <!-- Language Toggle -->
        <button class="quick-settings-btn" id="langToggle" title="DE / EN">
            <span class="lang-indicator" id="langIndicator">DE</span>
        </button>
        <!-- Theme Toggle -->
        <button class="quick-settings-btn" id="themeToggle" title="Theme wechseln">
            <svg class="theme-icon-sun" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
            <svg class="theme-icon-moon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
        </button>
    </div>

    <script src="chart.min.js"></script>
    <script src="./wailsjs/runtime/runtime.js"></script>
    <script src="./wailsjs/go/main/App.js"></script>
    <script src="utils.js"></script>
    <script src="audit.js"></script>
    <script src="app.js"></script>
    <!-- Footer -->
    <footer class="app-footer">
        <div class="footer-content">
            <span class="footer-version" id="footerVersion">v1.1.2</span>
            <span class="footer-separator">•</span>
            <span>© 2025 CV Manager</span>
            <span class="footer-separator">•</span>
            <span>Encrypted & GDPR Compliant</span>
        </div>
    </footer>
</body>
</html>
